---
import BaseLayout from "@/layouts/BaseLayout.astro";
import Text from "@/components/fundations/typography/Text.astro";
import EntryStructure from "@/components/landing/EntryStructure.astro";
import StickyNav from "@/components/global/StickyNav.astro";
import Wrapper from "@/components/fundations/containers/Wrapper.astro";
//
//
// Marketing
import { pageSections } from "@/data/entries.json";
import { pageExamples } from "@/data/entries.json";
//
//
// Application
import { forms, elements, overlay, navigation } from "@/data/entries.json";

//
//
// Ecommerce
import { storeSections } from "@/data/entries.json";

// Data
const groupedEntries = [
  {
    id: "marketing",
    title: "Marketing",
    description:
      "Landing pages, pricing, features, footers — all the stuff that makes marketing sites look like you know what you're doing.",
    groups: [
      { id: "pageSections", label: "Page sections", data: pageSections },
      { id: "pageExamples", label: "Landing Pages", data: pageExamples },
    ],
  },
  {
    id: "application",
    title: "Application",
    description:
      "Navs, buttons, forms, layouts — all the UI bits your app needs to look like it wasn’t thrown together last night.",
    groups: [
      { id: "navigation", label: "Navigation", data: navigation },
      { id: "overlay", label: "Overlay", data: overlay },
      { id: "forms", label: "Forms", data: forms },
      { id: "elements", label: "Elements", data: elements },
    ],
  },
  {
    id: "ecommerce",
    title: "eCommerce",
    description:
      "Carts, checkouts, promos, product pages — everything you need to make your store look open for business (and not like a side project).",
    groups: [{ id: "storeSections", label: "Pages", data: storeSections }],
  },
];
---

<BaseLayout
  title="Components - Oxbow UI"
  description="Browse all Oxbow UI components, elements, and layouts for marketing, application, and ecommerce UIs."
  image="/images/OpenGraph/twitter.png"
>

  <section
    class="divide-y divide-base-200 border-t border-sand-200 border-dashed"
    x-data="{ tab: 'marketing', setTab(id){ this.tab = id; history.replaceState({}, '', `#${id}`) } }"
    x-init="(() => { const id = location.hash?.slice(1); if (id) tab = id })()"
  >
  <Wrapper variant="standard" class="lg:border-x lg:border-sand-200 border-dashed">
      
      <nav class="relative flex  space-x-2 bg-white  w-fit p-1 rounded-lg" role="tablist" aria-label="Components sections">
        {groupedEntries.map(({ id, title }) => (
          <a
            role="tab"
            href={`#${id}`}
            data-id={id}
            @click.prevent="setTab($el.dataset.id)"
            :aria-selected={`tab === '${id}'`}
            class="px-2 py-1.5 rounded-md  nav-link text-xs transition-colors "
            :class={`tab === '${id}' ? 'text-accent-600  bg-sand-100 shadow-subtle shadow-sand-500/20 ' : 'text-base-700  hover:text-black hover:border-blue-300'`}
          >{title}</a>
        ))}
      </nav>
    </Wrapper>

    {groupedEntries.map(({ id, title, description, groups }) => {
      const firstGroup = groups[0]?.id || '';
      return (
        <section
          id={id}
          x-show={`tab === '${id}'`}
          x-cloak
          style={id === 'marketing' ? '' : 'display:none'}
          x-data={`{ inner: '${firstGroup}', setInner(id){ this.inner = id } }`}
        >
          <Wrapper variant="standard" class="border-x lg:border-x lg:border-sand-200 border-dashed">
            <section class="flex flex-col scroll-mt-24">
              <div>
                  <Text tag="p" variant="textSM" class=" text-base-600 max-w-md md:text-balance">{description}</Text>
               
                {/* Nested tabs for groups */}
                <nav class="flex items-center gap-2 mt-12 bg-white  w-fit p-1 rounded-lg" role="tablist" aria-label={`${title} groups`}>
                  {groups.map(({ id: groupId, label }) => (
                    <a
                      role="tab"
                      href={`#${id}-${groupId}`}
                      data-id={groupId}
                      @click.prevent="setInner($el.dataset.id)"
                      class="px-2 py-1.5 rounded-md  text-xs transition-colors"
                      :class={`inner === '${groupId}' ? 'text-accent-600  bg-sand-100  shadow-subtle shadow-sand-500/20' : 'text-base-700  hover:text-black hover:border-blue-300'`}
                    >{label}</a>
                  ))}
                </nav>

                <div class="mt-8">
                  {groups.map(({ id: groupId, label, data }, idx) => (
                    <div
                      id={groupId}
                      x-show={`inner === '${groupId}'`}
                      x-cloak
                      style={idx === 0 ? '' : 'display:none'}
                      class="flex flex-col gap-6"
                    >
                      <EntryStructure entries={data} />
                    </div>
                  ))}
                </div>
              </div>
            </section>
          </Wrapper>
        </section>
      );
    })}
  </section>
</BaseLayout>
