---
const {
  id,
  name,
  label,
  error,
  variant = "default",
  size = "base",
  class: className = "",
  ...rest
} = Astro.props;

const variantClasses = {
  default: [
    "bg-white",
    "border",
    "text-zinc-500",
    "ring-1",
    "ring-zinc-200",
    "placeholder-zinc-400",
    "focus:border-zinc-300",
    "focus:outline-none",
    "focus:ring-stone-500",
    "focus:ring-offset-2",
    "focus:ring-2",
  ],
  dark: [
    "bg-zinc-800",
    "text-zinc-100",
    "border-zinc-700",
    "ring-1",
    "ring-zinc-700",
    "placeholder-zinc-400",
    "focus:ring-zinc-500",
    "focus:ring-offset-2",
    "focus:border-zinc-600",
    "focus:outline-none",
  ],
};

const sizeClasses = {
  base: ["px-4", "py-3", "text-sm", "rounded-md"],
};

let textareaClasses = [
  "block",
  "w-full",
  "resize-y",
  "transition",
  "duration-300",
  "ease-in-out",
  ...sizeClasses[size],
  ...variantClasses[variant],
  ...className.split(" "),
];

const errorTextColor = variant === "dark" ? "text-red-400" : "text-red-600";
---

<div class="w-full">
  {
    label && (
      <label for={id} class="block mb-1 text-sm font-medium text-zinc-500">
        {label}
      </label>
    )
  }
  <textarea
    {...rest}
    id={id}
    name={name}
    rows={rest.rows || 4}
    class:list={textareaClasses}
    aria-invalid={!!error}
    aria-describedby={error ? `${id}-error` : undefined}></textarea>
  {
    error && (
      <p id={`${id}-error`} class={`mt-1 text-sm ${errorTextColor}`}>
        {error}
      </p>
    )
  }
</div>
