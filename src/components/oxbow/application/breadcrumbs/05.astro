---
export const description = "Responsive Collapsed Breadcrumb";
import Text from "@/components/fundations/typography/Text.astro";
import Home from "@/components/fundations/icons/Home.astro";
import ChevronRight from "@/components/fundations/icons/ChevronRight.astro";
import ThreeDots from "@/components/fundations/icons/ThreeDots.astro";
---

<section
  class="flex items-center justify-center bg-white p-18 dark:bg-zinc-900"
>
  <!-- copy:start -->
  <nav
    aria-label="Breadcrumb"
    x-data="{ crumbs:['Home','Library','Docs','Guides','Installation'], open:false, focusFirst(){ this.$nextTick(()=> this.$refs.first?.focus()) } }"
    class="max-w-xl mc-auto"
  >
    <ol
      role="list"
      class="flex items-center gap-1 t text-zinc-600 dark:text-zinc-300"
    >
      <li>
        <Text
          tag="a"
          href="#_"
          class="flex items-center gap-1 hover:text-blue-400"
          ><Home size="sm" /><span class="sr-only">Home</span></Text
        >
      </li>
      <ChevronRight size="sm" class="text-zinc-400" />

      <!-- Collapsed middle on small screens -->
      <li class="sm:hidden">
        <button
          type="button"
          class="inline-flex items-center px-2 rounded gap-1 h-7 bg-zinc-100 dark:bg-zinc-800 text-zinc-700 dark:text-zinc-200"
          @click="open=!open; if(open) focusFirst()"
          :aria-expanded="open"
          aria-controls="crumbs-collapsed"
        >
          <ThreeDots size="sm" />
          <span class="sr-only">Show path</span>
        </button>
        <div
          id="crumbs-collapsed"
          x-show="open"
          x-transition
          class="p-2 mt-2 bg-white rounded-lg ring-1 ring-zinc-200 dark:ring-zinc-700 dark:bg-zinc-900 shadow-sm"
          style="display:none"
        >
          <template x-for="(c,i) in crumbs.slice(1, -1)" :key="c">
            <Text
              tag="a"
              href="#_"
              class="block px-2 py-1 rounded hover:bg-zinc-50 dark:hover:bg-zinc-800 hover:text-blue-400"
              x-text="c"
              tabindex="-1"
              x-ref="first"
            />
          </template>
        </div>
      </li>

      <!-- Expanded on sm+ -->
      <template x-for="(c,i) in crumbs.slice(1, -1)" :key="c">
        <span class="contents">
          <li class="hidden sm:block">
            <Text
              tag="a"
              variant="textSM"
              href="#_"
              class="inline-flex items-center gap-1 hover:text-blue-400"
              x-text="c"
            />
          </li>
          <ChevronRight
            size="sm"
            class="hidden sm:block text-zinc-400"
            aria-hidden="true"
          />
        </span>
      </template>

      <!-- Current -->
      <li
        class="text-sm font-medium text-blue-500 dark:text-blue-400"
        x-text="crumbs[crumbs.length-1]"
        aria-current="page"
      >
      </li>
    </ol>
  </nav>
  <!-- copy:end -->
</section>
