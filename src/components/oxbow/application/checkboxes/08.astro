---
export const description = "Permissions Matrix (Read/Write/Admin)";
import Text from "@/components/fundations/typography/Text.astro";
---

<section
  class="flex flex-wrap items-center justify-center h-full p-24 bg-white gap-2 dark:bg-zinc-900"
>
  <!-- copy:start -->
  <div
    class="flex flex-col w-full max-w-2xl gap-3"
    x-data="{
      rows: [
        { name: 'Projects', read: true, write: false, admin: false },
        { name: 'Billing', read: false, write: false, admin: false },
        { name: 'Analytics', read: true, write: true, admin: false },
      ],
      toggle(row, key, event){
        const checked = event.target.checked
        row[key] = checked
        if (key === 'admin') {
          row.read = checked
          row.write = checked
        }
        if (!row.read && row.admin) row.admin = false
        if (!row.write && row.admin) row.admin = false
      },
      summary(row){
        const parts = []
        if (row.read) parts.push('Read')
        if (row.write) parts.push('Write')
        if (row.admin) parts.push('Admin')
        return parts.join(', ') || 'None'
      }
    }"
  >
    <div class="text-sm text-zinc-700 dark:text-zinc-200">
      Admin implies Read and Write. Unchecking Read/Write removes Admin.
    </div>
    <div
      class="px-2 text-xs font-medium grid grid-cols-4 text-zinc-500 dark:text-zinc-400"
    >
      <div>Resource</div>
      <div class="text-center">Read</div>
      <div class="text-center">Write</div>
      <div class="text-center">Admin</div>
    </div>
    <template x-for="(row, i) in rows" :key="row.name">
      <div
        class="items-center px-2 py-2 bg-white border rounded grid grid-cols-4 border-zinc-200 dark:border-zinc-800 dark:bg-zinc-900"
      >
        <div class="flex flex-col">
          <span
            class="text-sm text-zinc-700 dark:text-zinc-200"
            x-text="row.name"></span>
          <span
            class="text-xs text-zinc-500 dark:text-zinc-400"
            x-text="summary(row)"></span>
        </div>
        <div class="flex justify-center">
          <input
            type="checkbox"
            :id="`r-`+i"
            :checked="row.read"
            @change="toggle(row,'read',$event)"
            class="text-blue-600 rounded shadow size-4 border-zinc-300 dark:border-zinc-700 focus:ring-blue-600 dark:bg-zinc-900 dark:checked:bg-blue-600"
          />
        </div>
        <div class="flex justify-center">
          <input
            type="checkbox"
            :id="`w-`+i"
            :checked="row.write"
            @change="toggle(row,'write',$event)"
            class="text-blue-600 rounded shadow size-4 border-zinc-300 dark:border-zinc-700 focus:ring-blue-600 dark:bg-zinc-900 dark:checked:bg-blue-600"
          />
        </div>
        <div class="flex justify-center">
          <input
            type="checkbox"
            :id="`a-`+i"
            :checked="row.admin"
            @change="toggle(row,'admin',$event)"
            class="text-blue-600 rounded shadow size-4 border-zinc-300 dark:border-zinc-700 focus:ring-blue-600 dark:bg-zinc-900 dark:checked:bg-blue-600"
          />
        </div>
      </div>
    </template>
  </div>
  <!-- copy:end -->
</section>
