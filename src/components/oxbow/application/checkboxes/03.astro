---
export const description = "Required Consent with Validation";
import Text from "@/components/fundations/typography/Text.astro";
---

<section
  class="flex flex-wrap items-center justify-center h-full p-24 bg-white gap-2 dark:bg-zinc-900"
>
  <!-- copy:start -->
  <form
    x-data="{ accepted: false, submitted: false }"
    @submit.prevent="submitted = true; if (!accepted) return;"
    class="flex flex-col w-full max-w-md gap-2"
  >
    <div class="flex items-start gap-3">
      <input
        id="consent-required"
        name="consent-required"
        type="checkbox"
        x-model="accepted"
        :aria-invalid="submitted && !accepted"
        aria-describedby="consent-required-error"
        class="text-blue-600 rounded shadow size-4 border-zinc-300 dark:border-zinc-700 focus:ring-blue-600 dark:bg-zinc-900 dark:checked:bg-blue-600"
      />
      <div>
        <Text
          for="consent-required"
          tag="label"
          class="block text-sm text-zinc-600 dark:text-zinc-300"
        >
          I agree to the Terms and Privacy Policy
        </Text>
        <p
          id="consent-required-error"
          x-show="submitted && !accepted"
          class="mt-1 text-xs text-red-600 dark:text-red-400"
          role="alert"
        >
          You must accept to continue.
        </p>
      </div>
    </div>
    <div class="flex gap-2">
      <button
        type="submit"
        :disabled="!accepted"
        class="px-3 py-1.5 text-sm rounded bg-blue-600 text-white disabled:opacity-50 disabled:cursor-not-allowed"
      >
        Continue
      </button>
      <span class="self-center text-xs text-zinc-500 dark:text-zinc-400">
        Status: <span x-text="accepted ? 'Ready' : 'Needs consent'"></span>
      </span>
    </div>
  </form>
  <!-- copy:end -->
</section>
