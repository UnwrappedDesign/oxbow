---
export const description = "Checklist with Progress Indicator";
import Text from "@/components/fundations/typography/Text.astro";
---

<section
  class="flex flex-wrap items-center justify-center h-full p-24 bg-white gap-2 dark:bg-zinc-900"
>
  <!-- copy:start -->
  <div
    class="flex flex-col w-full max-w-md gap-3"
    x-data="{
      tasks: [
        { label: 'Write title', done: true },
        { label: 'Add description', done: false },
        { label: 'Attach screenshots', done: false },
        { label: 'Request review', done: false },
      ],
      get completed(){ return this.tasks.filter(t => t.done).length },
      get percent(){ return Math.round((this.completed / this.tasks.length) * 100) },
      completeAll(){ this.tasks = this.tasks.map(t => ({...t, done: true})) },
      resetAll(){ this.tasks = this.tasks.map(t => ({...t, done: false})) }
    }"
  >
    <div class="flex items-center justify-between">
      <div class="text-sm text-zinc-700 dark:text-zinc-200">
        Progress: <span x-text="completed"></span>/<span x-text="tasks.length"
        ></span> (<span x-text="percent"></span>%)
      </div>
      <div class="flex gap-2">
        <button
          type="button"
          class="px-2 py-1 text-xs text-white bg-blue-600 rounded"
          @click="completeAll()">Complete All</button
        >
        <button
          type="button"
          class="px-2 py-1 text-xs border rounded border-zinc-300 text-zinc-700 dark:border-zinc-700 dark:text-zinc-200"
          @click="resetAll()">Reset</button
        >
      </div>
    </div>
    <div
      class="w-full h-2 overflow-hidden rounded bg-zinc-200 dark:bg-zinc-800"
    >
      <div class="h-full bg-blue-600" :style="`width: ${percent}%`"></div>
    </div>
    <template x-for="(task, idx) in tasks" :key="task.label">
      <div class="flex items-center gap-3">
        <input
          type="checkbox"
          :id="`task-` + idx"
          x-model="task.done"
          class="text-blue-600 rounded shadow size-4 border-zinc-300 dark:border-zinc-700 focus:ring-blue-600 dark:bg-zinc-900 dark:checked:bg-blue-600"
        />
        <Text
          :for="`task-` + idx"
          tag="label"
          class="block text-sm text-zinc-700 dark:text-zinc-200"
          :class="task.done ? 'line-through text-zinc-400 dark:text-zinc-500' : ''"
          x-text="task.label"
        />
      </div>
    </template>
  </div>
  <!-- copy:end -->
</section>
