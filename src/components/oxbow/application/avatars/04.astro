---
const avatars = [
  { src: "/avatars/1.jpg", alt: "#_" },
  { src: "/avatars/2.jpg", alt: "#_" },
  { src: "/avatars/3.jpg", alt: "#_" },
  { src: "/avatars/4.jpg", alt: "#_" },
];
---

<div class="flex items-center justify-center p-12 bg-white dark:bg-zinc-900">
  <!-- copy:start -->
  <div
    class="flex items-center gap-3"
    x-data="{
      members: ['/avatars/1.jpg','/avatars/2.jpg','/avatars/3.jpg','/avatars/4.jpg','/avatars/5.jpg'],
      expanded: false,
      max: 3,
      promote(i){ if(i===0) return; const m=this.members; [m[0], m[i]] = [m[i], m[0]] },
      get visibleRest(){ return this.expanded ? this.members.slice(1) : this.members.slice(1, 1+this.max) },
      get extra(){ return Math.max(0, this.members.length - 1 - this.visibleRest.length) }
    }"
  >
    <img
      :src="members[0]"
      alt="Primary member"
      class="object-cover rounded-full size-14 ring-2 ring-white dark:ring-zinc-800"
    />
    <div class="flex items-center -space-x-2">
      <template x-for="(src, idx) in visibleRest" :key="src">
        <button
          type="button"
          class="focus:outline-none"
          @click="promote(idx+1)"
          :aria-label="`Make member ${idx+2} primary`"
          title="Make primary"
        >
          <img :src="src" alt="" class="inline-block object-cover object-center rounded-full size-10 ring-2 ring-white dark:ring-zinc-800" />
        </button>
      </template>
      <button
        type="button"
        x-show="extra > 0"
        @click="expanded = !expanded"
        class="inline-flex items-center justify-center rounded-full size-10 bg-zinc-100 text-zinc-600 ring-2 ring-white dark:bg-zinc-800 dark:text-zinc-300 dark:ring-zinc-900"
        :aria-expanded="expanded"
      >
        <span x-text="expanded ? 'â€“' : ('+' + extra)"></span>
      </button>
    </div>
  </div>
  <!-- copy:end -->
</div>
