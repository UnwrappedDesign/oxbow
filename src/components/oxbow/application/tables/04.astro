---
import Button from "@/components/fundations/buttons/Button.astro";
import ChevronLeft from "@/components/fundations/icons/ChevronLeft.astro";
import ChevronRight from "@/components/fundations/icons/ChevronRight.astro";
---

<div class="flex flex-col justify-center p-8 mx-auto bg-white dark:bg-zinc-900">
  <!-- copy:start -->
  <div
    class="flow-root max-w-7xl mx-auto"
    x-data="{
      page: 1,
      size: 3,
      rows: [
        { name: 'Navy', img: '/images/navy.png', price: '$129.00', status: 'Paid', statusType: 'success', sales: 40, revenue: '$3900' },
        { name: 'Flabbergasted', img: '/images/flabbergasted.png', price: '$129.00', status: 'Paid', statusType: 'success', sales: 60, revenue: '$5940' },
        { name: 'Outkast', img: '/images/outkast.png', price: '$129.00', status: 'Canceled', statusType: 'danger', sales: 80, revenue: '€7920.00' },
        { name: 'Bundle', img: '/images/bundle.png', price: '$199.00', status: 'Pending', statusType: 'warning', sales: 553, revenue: '€9940.00' },
      ],
      pages() { return Math.max(1, Math.ceil(this.rows.length / this.size)); },
      pageRows() { const s = (this.page - 1) * this.size; return this.rows.slice(s, s + this.size); }
    }"
  >
    <div class="-mx-4 -my-2 overflow-x-auto sm:-mx-6 lg:-mx-8">
      <div class="inline-block min-w-full py-2 align-middle sm:px-6 lg:px-8">
        <div class="flex justify-center">
          <table class="min-w-[900px] text-sm">
            <thead class="bg-zinc-100 dark:bg-zinc-950">
              <tr>
                <th
                  scope="col"
                  class="px-3 py-2 text-left font-medium text-zinc-900 dark:text-zinc-100"
                >
                  Name
                  <th
                    scope="col"
                    class="px-3 py-2 text-left font-medium text-zinc-900 dark:text-zinc-100"
                  >
                    Price
                  </th>
                  <th
                    scope="col"
                    class="px-3 py-2 text-left font-medium text-zinc-900 dark:text-zinc-100"
                  >
                    Status
                  </th>
                  <th
                    scope="col"
                    class="px-3 py-2 text-left font-medium text-zinc-900 dark:text-zinc-100"
                  >
                    Total Sales
                  </th>
                  <th
                    scope="col"
                    class="px-3 py-2 font-medium text-zinc-900 dark:text-zinc-100 text-right"
                  >
                    Total revenue
                  </th>
                  <th scope="col" class="relative py-3.5 pl-3 pr-4 sm:pr-0">
                    <span class="sr-only">Edit</span>
                  </th>
                </th>
              </tr>
              <tbody class="divide-y divide-zinc-200 dark:divide-zinc-700">
                <template x-for="r in pageRows()" :key="r.name">
                  <tr>
                    <td
                      class="py-2 pl-3 pr-3 text-sm font-medium tracking-tighter truncate whitespace-nowrap sm:pl-0 text-zinc-900 dark:text-zinc-100"
                    >
                      <span class="flex items-center gap-2">
                        <img
                          class="inline-block h-14 rounded"
                          :src="r.img"
                          :alt="r.name"
                        />
                        <span x-text="r.name"></span>
                      </span>
                    </td>
                    <td
                      class="px-3 py-2 text-sm font-medium whitespace-nowrap text-zinc-500 dark:text-zinc-400"
                      x-text="r.price"></td>
                    <td
                      class="max-w-xs px-3 py-2 overflow-hidden whitespace-nowrap"
                      :class="r.status==='Paid' ? 'text-emerald-600 dark:text-emerald-400' : r.status==='Canceled' ? 'text-red-600 dark:text-red-400' : 'text-yellow-600 dark:text-yellow-400'"
                      x-text="r.status"></td>
                    <td
                      class="px-3 py-2 text-sm font-medium whitespace-nowrap text-zinc-500"
                      x-text="r.sales"></td>
                    <td
                      class="px-3 py-2 text-sm whitespace-nowrap text-zinc-900 dark:text-zinc-100 text-right font-mono font-medium"
                      x-text="r.revenue"></td>
                  </tr>
                </template>
                <tr x-show="pageRows().length===0">
                  <td
                    colspan="6"
                    class="px-3 py-2 text-center text-zinc-500 dark:text-zinc-300"
                    >No results</td
                  >
                </tr>
              </tbody>
            </thead>
          </table>
        </div>
      </div>
      <nav
        class="flex gap-2 lg:items-center lg:justify-between px-4 mt-4 sm:px-0 mx-auto max-w-[900px] pb-2"
      >
        <Button
          gap="xs"
          size="xs"
          variant="muted"
          class="w-fit"
          :disabled="page<=1"
          @click="page=Math.max(1,page-1)"
        >
          <ChevronLeft size="sm" slot="icon" slot="left-icon" />
          Previous
        </Button>
        <div class="hidden lg:flex lg:gap-2 text-sm text-zinc-500">
          Page <span x-text="page"></span> of <span x-text="pages()"></span>
        </div>
        <Button
          gap="xs"
          size="xs"
          variant="muted"
          class="w-fit"
          :disabled="page>=pages()"
          @click="page=Math.min(pages(),page+1)"
        >
          Next
          <ChevronRight size="sm" slot="icon" slot="right-icon" />
        </Button>
      </nav>
    </div>
    <!-- copy:end -->
  </div>
</div>
