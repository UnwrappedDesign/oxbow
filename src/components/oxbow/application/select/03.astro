---
export const description = "Dependant selects";
import Select from "@/components/fundations/inputs/Select.astro";
// Remove duplicate imports
const countryOptions = [
  { label: "United States", value: "us" },
  { label: "Canada", value: "ca" },
  { label: "United Kingdom", value: "uk" },
  { label: "Australia", value: "au" },
  { label: "Germany", value: "de" },
  { label: "France", value: "fr" },
  { label: "Japan", value: "jp" },
];
---

<div class="flex justify-center p-16 mx-auto bg-white dark:bg-zinc-900">
  <div class="max-w-sm mx-auto w-full">
    <!-- copy:start -->
    <div
      class="flex flex-col w-full max-w-sm gap-2"
      x-data="{
   country: 'us',
   stateOptions: [],
   state: '',
   loadStates() {
     const options = {
       us: [
         { label: 'California', value: 'ca' },
         { label: 'New York', value: 'ny' },
         { label: 'Texas', value: 'tx' }
       ],
       ca: [
         { label: 'Ontario', value: 'on' },
         { label: 'Quebec', value: 'qc' },
         { label: 'British Columbia', value: 'bc' }
       ],
       uk: [
         { label: 'England', value: 'eng' },
         { label: 'Scotland', value: 'sco' },
         { label: 'Wales', value: 'wal' }
       ]
     };
     this.stateOptions = options[this.country] || [];
     this.state = this.stateOptions.length > 0 ? this.stateOptions[0].value : '';
   }
  }"
      x-init="loadStates()"
    >
      <div class="flex flex-col gap-4">
        <Select
          id="country-dependent"
          name="country"
          label="Country"
          options={countryOptions}
          xModel="country"
          xOn={{ change: "loadStates()" }}
          class="w-full"
        />

        <div>
          <!-- Fixed state select -->
          <label
            for="state"
            class="block mb-1 text-sm font-medium text-zinc-500"
            >State/Province</label
          >
          <Select id="state" name="state" x-model="state" class="w-full">
            <template x-for="option in stateOptions" :key="option.value">
              <option :value="option.value" x-text="option.label"></option>
            </template>
          </Select>
        </div>
      </div>

      <div class="mt-2">
        <p class="text-xs font-medium text-zinc-500">
          Selected country: <span class="uppercase" x-text="country"></span>
        </p>
        <p class="text-xs font-medium text-zinc-500">
          Selected state/province: <span class="uppercase" x-text="state"
          ></span>
        </p>
      </div>
    </div>
    <!-- copy:end -->
  </div>
</div>
