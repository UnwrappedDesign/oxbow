---
import Text from "@/components/fundations/typography/Text.astro";
---

<div
  x-cloak
  x-show="!username"
  class="flex items-center justify-center py-2 lg:h-12 bg-accent-950 border-b px-8"
>
  <Text tag="p" variant="textBase" class="font-medium text-white">
    <Text tag="p" variant="textBase" class="font-medium text-white">
      <Text tag="strong" class="font-semibold text-white" />
      <Text tag="span" class="font-semibold uppercase text-white font-sans"
        >BLACK WEEK</Text
      > â€” Get a
      <Text tag="strong" class="font-semibold uppercase text-white font-sans"
        >70% Discount.
      </Text>
      <!-- Discount already applied at checkout. -->
      Discount already applied at checkout.

      <span id="countdown-days"></span> days left
    </Text>
  </Text>
</div>
<script type="module">
  // Vanilla JavaScript Countdown
  document.addEventListener("DOMContentLoaded", function () {
    // Set the target date to December 2, 2024, at midnight
    const targetDate = new Date(2024, 11, 2);
    targetDate.setHours(0, 0, 0, 0); // Reset time to midnight

    const countdownElement = document.getElementById("countdown-days");

    function updateCountdown() {
      const now = new Date();
      now.setHours(0, 0, 0, 0); // Reset current time to midnight

      const diff = targetDate - now;

      if (diff > 0) {
        const days = Math.floor(diff / (1000 * 60 * 60 * 24));
        countdownElement.textContent = days;
      } else {
        countdownElement.textContent = 0; // If date has passed
      }
    }

    // Initial calculation
    updateCountdown();

    // Update every 1 hour
    setInterval(updateCountdown, 1000 * 60 * 60);
  });
</script>
